FROM ghcr.io/cirruslabs/flutter:3.16.0

WORKDIR /app

# Install dependencies
COPY pubspec.yaml pubspec.lock ./
RUN flutter pub get

# Copy source code
COPY . .

# Build web app
RUN flutter build web --web-renderer html

# Install a simple HTTP server
RUN apt-get update && apt-get install -y python3 python3-pip && pip3 install http.server

# Expose port
EXPOSE 8080

# Start HTTP server
CMD ["python3", "-m", "http.server", "8080", "--directory", "build/web"]

